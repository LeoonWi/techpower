# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å Network Security –¥–ª—è Android

## ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞

**–ü—Ä–æ–±–ª–µ–º–∞**: –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∞ –≤ —Å–æ–±—Ä–∞–Ω–Ω–æ–π APK –≤–µ—Ä—Å–∏–∏ –∏–∑-–∑–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ HTTP-—Ç—Ä–∞—Ñ–∏–∫–∞ –≤ Android 9+

**–†–µ—à–µ–Ω–∏–µ**: –°–æ–∑–¥–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π expo-plugin –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è network security –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π

## üîß –í–Ω–µ—Å–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –°–æ–∑–¥–∞–Ω Expo Plugin
- **–§–∞–π–ª**: `expo-plugins/network-security-config.js`
- **–§—É–Ω–∫—Ü–∏—è**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç `network_security_config.xml` –ø—Ä–∏ –∫–∞–∂–¥–æ–π —Å–±–æ—Ä–∫–µ
- **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ**: –§–∞–π–ª –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞–Ω, —Ç–∞–∫ –∫–∞–∫ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### 2. –û–±–Ω–æ–≤–ª–µ–Ω app.json
- –î–æ–±–∞–≤–ª–µ–Ω plugin –≤ —Å–µ–∫—Ü–∏—é `plugins`
- –£–±—Ä–∞–Ω–∞ —Å—Å—ã–ª–∫–∞ –Ω–∞ `networkSecurityConfig` (—Ç–µ–ø–µ—Ä—å —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è plugin)
- –û—Å—Ç–∞–≤–ª–µ–Ω `usesCleartextTraffic: true` –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

### 3. –£–ª—É—á—à–µ–Ω API-–∫–ª–∏–µ–Ω—Ç
- –£–≤–µ–ª–∏—á–µ–Ω —Ç–∞–π–º–∞—É—Ç —Å 10 –¥–æ 30 —Å–µ–∫—É–Ω–¥
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫
- –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–µ—Ç–µ–≤—ã—Ö –æ—à–∏–±–æ–∫

### 4. –û–±–Ω–æ–≤–ª–µ–Ω–∞ EAS –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- –î–æ–±–∞–≤–ª–µ–Ω—ã environment variables –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Å–±–æ—Ä–∫–∏
- –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä–æ—Ñ–∏–ª–∏ –¥–ª—è preview –∏ production

### 5. –î–æ–±–∞–≤–ª–µ–Ω—ã —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- –°–∫—Ä–∏–ø—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–µ—Ç–∏: `scripts/test-network.js`
- Npm —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –æ—Ç–ª–∞–¥–∫–µ: `DEBUG_NETWORK_ISSUES.md`

### 6. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å –∞–ª–∏–∞—Å–∞–º–∏ –ø—É—Ç–µ–π
- –°–æ–∑–¥–∞–Ω `babel.config.js` —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∞–ª–∏–∞—Å–æ–≤ `@/`
- –°–æ–∑–¥–∞–Ω `metro.config.js` —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π –ø—É—Ç–µ–π
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω `babel-plugin-module-resolver`
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ "Unable to resolve module @/contexts/AuthContext"

## üéØ –†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ –¥–æ–º–µ–Ω—ã

Plugin –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑—Ä–µ—à–∞–µ—Ç HTTP-—Ç—Ä–∞—Ñ–∏–∫ –¥–ª—è:
- `109.120.139.145` (–æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–µ—Ä)
- `localhost` (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏)
- `10.0.2.2` (—ç–º—É–ª—è—Ç–æ—Ä Android)
- `127.0.0.1` (–ª–æ–∫–∞–ª—å–Ω—ã–π —Ö–æ—Å—Ç)
- `192.168.1.0` (–ª–æ–∫–∞–ª—å–Ω–∞—è —Å–µ—Ç—å)

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã plugin:
```bash
npm run test:plugin
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ç–∏:
```bash
npm run test:network
```

### –°–±–æ—Ä–∫–∞ APK:
```bash
npm run build:preview    # –¥–ª—è preview
npm run build:production # –¥–ª—è production
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤:
```bash
npm run logs:android
```

### –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ –∏ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞:
```bash
npm run clean
```

## üì± –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. **–°–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω**: ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ —Å –ø–æ–º–æ—â—å—é `test-network.js`
2. **Plugin —Ä–∞–±–æ—Ç–∞–µ—Ç**: ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç `network_security_config.xml`
3. **AndroidManifest –æ–±–Ω–æ–≤–ª–µ–Ω**: ‚úÖ –°–æ–¥–µ—Ä–∂–∏—Ç —Å—Å—ã–ª–∫—É –Ω–∞ network security config
4. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞**: ‚úÖ –†–∞–∑—Ä–µ—à–∞–µ—Ç HTTP –¥–ª—è –Ω—É–∂–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤
5. **–ê–ª–∏–∞—Å—ã –ø—É—Ç–µ–π —Ä–∞–±–æ—Ç–∞—é—Ç**: ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã babel.config.js –∏ metro.config.js
6. **Dev-—Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è**: ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ —Å –∏–º–ø–æ—Ä—Ç–∞–º–∏ @/

## üîÑ –ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ

1. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ APK:
   ```bash
   npm run build:preview
   ```

2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é

3. –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –æ—Å—Ç–∞–µ—Ç—Å—è, —Å–æ–±–µ—Ä–∏—Ç–µ –ª–æ–≥–∏:
   ```bash
   npm run logs:android
   ```

## üìã –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ IP-–∞–¥—Ä–µ—Å–µ —Å–µ—Ä–≤–µ—Ä–∞

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å IP-–∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞:
1. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `expo-plugins/network-security-config.js`
2. –ù–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É —Å IP-–∞–¥—Ä–µ—Å–æ–º –≤ `networkSecurityConfigContent`
3. –ò–∑–º–µ–Ω–∏—Ç–µ –Ω–∞ –Ω—É–∂–Ω—ã–π IP
4. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

**–§–∞–π–ª—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö**:
- `expo-plugins/network-security-config.js` - –æ—Å–Ω–æ–≤–Ω–æ–π plugin
- `android/app/src/main/res/xml/network_security_config.xml` - —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- `android/app/src/main/AndroidManifest.xml` - –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ config

**–õ–æ–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏**:
- `adb logcat -s ReactNativeJS` - –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ü–æ–∏—Å–∫ —Å–æ–æ–±—â–µ–Ω–∏–π: `API_BASE_URL:`, `Auth: error details`, `HTTP Error:`

---

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
**–î–∞—Ç–∞**: $(date)
**–ò–∑–º–µ–Ω–µ–Ω–∏—è**: Network security policy –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –¥–ª—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è HTTP-—Ç—Ä–∞—Ñ–∏–∫–∞ –∫ —Å–µ—Ä–≤–µ—Ä—É 